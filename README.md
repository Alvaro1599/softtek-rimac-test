# Medical Appointment System

Sistema de agendamiento de citas m√©dicas desarrollado con arquitectura serverless en AWS. El sistema permite gestionar citas m√©dicas para m√∫ltiples pa√≠ses (Per√∫ y Chile) utilizando servicios nativos de AWS para procesamiento as√≠ncrono y almacenamiento distribuido.

## üìë Tabla de Contenidos

- [Inicio R√°pido](#inicio-r√°pido)
- [Arquitectura](#arquitectura)
- [Prerequisitos](#prerequisitos)
- [Documentaci√≥n de la API](#documentaci√≥n-de-la-api)
  - [URLs de Acceso](#urls-de-acceso)
  - [Swagger UI Interactivo](#swagger-ui-interactivo)
- [API Endpoints](#api-endpoints)
- [Desarrollo y Testing](#desarrollo-y-testing)
- [Despliegue](#despliegue)
  - [Despliegue del Backend](#despliegue-en-aws)
  - [Despliegue del Frontend](#despliegue-del-frontend)
- [Estructura del Proyecto](#estructura-del-proyecto)
- [Stack Tecnol√≥gico](#stack-tecnol√≥gico)
- [Soluci√≥n de Problemas](#soluci√≥n-de-problemas)

## Arquitectura

El sistema implementa una arquitectura basada en eventos utilizando los siguientes componentes de AWS:

- **API Gateway HTTP**: Endpoints REST para gesti√≥n de citas
- **AWS Lambda**: Funciones serverless para procesamiento de l√≥gica de negocio
- **DynamoDB**: Base de datos NoSQL para almacenamiento de citas
- **SNS (Simple Notification Service)**: Publicaci√≥n de eventos de citas
- **SQS (Simple Queue Service)**: Colas dedicadas por pa√≠s (PE, CL) y estado (completed)
- **EventBridge**: Bus de eventos para flujos as√≠ncronos
- **S3**: Almacenamiento y hosting del frontend web

### Flujo de Procesamiento

1. Cliente crea una cita mediante API Gateway
2. Lambda principal valida y guarda en DynamoDB
3. Evento publicado a SNS con filtro por pa√≠s
4. SQS recibe mensaje filtrado seg√∫n pa√≠s (PE o CL)
5. Lambda espec√≠fica de pa√≠s procesa la cita
6. EventBridge emite evento de completado
7. Lambda de completado actualiza estado final

## Inicio R√°pido

### Ver la Aplicaci√≥n Web (Local)

```bash
# 1. Clonar el repositorio
git clone <repository-url>
cd softek-rimac

# 2. Abrir la aplicaci√≥n en el navegador
open web/index.html

# O usar un servidor web simple
cd web && python3 -m http.server 8000
# Navegar a: http://localhost:8000
```

### Ver la Documentaci√≥n Swagger (Local)

```bash
# Abrir directamente
open web/api-docs.html

# O con servidor web
cd web && python3 -m http.server 8000
# Navegar a: http://localhost:8000/api-docs.html
```

### Desplegar Todo (Backend + Frontend)

```bash
# 1. Instalar dependencias
pnpm install

# 2. Desplegar backend a AWS
pnpm deploy
# ‚ö†Ô∏è IMPORTANTE: Copia la URL del API Gateway que aparece en la salida

# 3. Configurar bucket S3 en package.json
# Edita el script "prepare:web" y reemplaza "softtek-rimac-page"
# por el nombre de tu bucket S3

# 4. Actualizar API_BASE_URL en web/js/config.js
# Pega la URL del API Gateway copiada en el paso 2

# 5. Desplegar frontend a S3
pnpm run prepare:web

# 6. (OPCIONAL) Si usas CloudFront, invalidar el cache
aws cloudfront create-invalidation \
  --distribution-id TU-DISTRIBUTION-ID \
  --paths "/*"

# 7. Acceder a:
# - Frontend: http://softtek-rimac-page.s3-website-us-east-1.amazonaws.com
# - API Docs: http://softtek-rimac-page.s3-website-us-east-1.amazonaws.com/api-docs.html
```

**‚ö†Ô∏è Checklist Pre-Deployment:**
- [ ] AWS CLI configurado con credenciales v√°lidas
- [ ] Bucket S3 creado con website hosting habilitado
- [ ] Nombre del bucket actualizado en `package.json`
- [ ] Permisos S3 configurados (PutObject, DeleteObject, ListBucket)
- [ ] (Opcional) CloudFront distribution creada y configurada

## Prerequisitos

Antes de comenzar, aseg√∫rate de tener instalado:

- **Node.js**: Versi√≥n 20.x o superior
- **pnpm**: Versi√≥n 10.7.1 o superior
  ```bash
  npm install -g pnpm
  ```
- **AWS CLI**: Configurado con credenciales v√°lidas
  ```bash
  aws configure
  ```
- **Serverless Framework**: Versi√≥n 4.x
  ```bash
  npm install -g serverless
  ```

## Configuraci√≥n Inicial

### 1. Clonar el Repositorio

```bash
git clone <repository-url>
cd softek-rimac
```

### 2. Instalar Dependencias

```bash
pnpm install
```

### 3. Configurar Variables de Entorno

Crear un archivo `.env` en la ra√≠z del proyecto:

```env
# Configuraci√≥n RDS para Per√∫ (Mock - No implementado completamente)
RDS_PE_HOST=localhost
RDS_PE_PORT=3306
RDS_PE_USER=admin
RDS_PE_PASSWORD=password123
RDS_PE_DATABASE=appointments_pe

# Configuraci√≥n RDS para Chile (Mock - No implementado completamente)
RDS_CL_HOST=localhost
RDS_CL_PORT=3306
RDS_CL_USER=admin
RDS_CL_PASSWORD=password123
RDS_CL_DATABASE=appointments_cl
```

**Nota**: Las variables de RDS son configuraci√≥n placeholder. El sistema actualmente utiliza DynamoDB como almacenamiento principal. La integraci√≥n con RDS no est√° completamente implementada.

## Desarrollo y Testing

### Ejecutar Pruebas

El proyecto utiliza Jest para pruebas unitarias con cobertura configurada al 80%.

```bash
# Ejecutar todas las pruebas
pnpm test

# Ejecutar con reporte de cobertura
pnpm test:coverage

# Modo watch para desarrollo
pnpm test:watch

# Modo verbose para m√°s detalles
pnpm test:verbose
```

### Estructura de Testing

- Cobertura m√≠nima: 80% (branches, functions, lines, statements)
- Ubicaci√≥n de tests: `src/__tests__/unit/`
- Configuraci√≥n: `jest.config.js`

## Despliegue

### Despliegue en AWS

El sistema se despliega completamente en AWS utilizando Serverless Framework.

#### Despliegue en Desarrollo

```bash
pnpm deploy
```

#### Despliegue en Producci√≥n

```bash
serverless deploy --stage prod --region us-east-1
```

#### Eliminar Recursos

```bash
pnpm remove
```

### Recursos Creados en AWS

El despliegue crea autom√°ticamente:

1. **DynamoDB Table**: `medical-appointment-system-appointments-{stage}`
   - Partition Key: `appointmentId`
   - GSI: `InsuredIdIndex` (por `insuredId`)

2. **Lambda Functions**:
   - `appointment`: API principal de citas
   - `health`: Health check del sistema
   - `appointmentPE`: Procesador de citas Per√∫
   - `appointmentCL`: Procesador de citas Chile
   - `appointmentCompleted`: Procesador de citas completadas

3. **SNS Topic**: `medical-appointment-system-topic-{stage}`
   - Subscriptions filtradas por pa√≠s (PE, CL)

4. **SQS Queues**:
   - `medical-appointment-system-sqs-pe-{stage}`
   - `medical-appointment-system-sqs-cl-{stage}`
   - `medical-appointment-system-sqs-completed-{stage}`

5. **EventBridge Event Bus**: `medical-appointment-system-events-{stage}`
   - Rule para eventos `appointment.completed`

## Documentaci√≥n de la API

### Swagger UI Interactivo

El proyecto incluye documentaci√≥n interactiva de la API usando **Swagger UI** y **OpenAPI 3.0**:

- **Documentaci√≥n Web**: Accesible desde el bot√≥n "API Docs" en el frontend
- **Especificaci√≥n OpenAPI**: Archivo `web/openapi.yaml` con definici√≥n completa de la API
- **Try it Out**: Permite probar los endpoints directamente desde el navegador

#### URLs de Acceso

##### Aplicaci√≥n Web (Frontend)
```
Producci√≥n:  http://softtek-rimac-page.s3-website-us-east-1.amazonaws.com/
Local:       Abrir web/index.html en el navegador

P√°ginas disponibles:
‚îú‚îÄ‚îÄ /index.html              # P√°gina principal - Agendar citas
‚îú‚îÄ‚îÄ /my-appointments.html    # Consultar mis citas
‚îî‚îÄ‚îÄ /api-docs.html          # Documentaci√≥n Swagger UI
```

##### Documentaci√≥n Swagger
```
Swagger UI:      http://softtek-rimac-page.s3-website-us-east-1.amazonaws.com/api-docs.html
OpenAPI YAML:    http://softtek-rimac-page.s3-website-us-east-1.amazonaws.com/openapi.yaml
Local Swagger:   Abrir web/api-docs.html en el navegador
Local YAML:      web/openapi.yaml
```

##### API Endpoints (Backend)
```
Base URL Dev:  https://nlhic74tlk.execute-api.us-east-1.amazonaws.com

Endpoints disponibles:
‚îú‚îÄ‚îÄ GET  /health                              # Health check
‚îú‚îÄ‚îÄ POST /appointments                        # Crear cita
‚îú‚îÄ‚îÄ GET  /insured/{insuredId}/appointments   # Citas por asegurado
‚îî‚îÄ‚îÄ GET  /appointments/{appointmentId}       # Detalle de cita
```

**Nota**: El `{api-id}` se genera autom√°ticamente al desplegar con `pnpm deploy` y se mostrar√° en la salida del comando.

#### Acceder a la Documentaci√≥n

2. **Dev**:
   - URL directa: `http://softtek-rimac-page.s3-website-us-east-1.amazonaws.com/api-docs.html`
   - Desde la app: Click en el bot√≥n "üìö API Docs" en la navegaci√≥n superior

3. **Desde Frontend**: Click en el bot√≥n "API Docs" en cualquier p√°gina

#### Caracter√≠sticas de la Documentaci√≥n

- ‚úÖ Especificaci√≥n completa OpenAPI 3.0
- ‚úÖ Ejemplos de request/response para cada endpoint
- ‚úÖ Esquemas de datos con validaciones
- ‚úÖ C√≥digos de error documentados
- ‚úÖ Interfaz interactiva para probar endpoints
- ‚úÖ Descarga del archivo OpenAPI YAML
- ‚úÖ Integraci√≥n con el dise√±o del sitio
- ‚úÖ Selector de servidor (producci√≥n/local)
- ‚úÖ Dise√±o responsive para mobile

## API Endpoints

Una vez desplegado, el sistema expone los siguientes endpoints:

### POST /appointments
Crear nueva cita m√©dica

**Request Body**:
```json
{
  "insuredId": "string",
  "countryISO": "PE" | "CL",
  "specialty": "string",
  "date": "YYYY-MM-DD",
  "time": "HH:mm"
}
```

**Response**:
```json
{
  "appointmentId": "string",
  "status": "pending",
  "insuredId": "string",
  "countryISO": "string",
  "specialty": "string",
  "appointmentDate": "ISO-8601",
  "createdAt": "ISO-8601"
}
```

### GET /insured/{insuredId}/appointments
Obtener todas las citas de un asegurado

**Response**:
```json
{
  "appointments": [
    {
      "appointmentId": "string",
      "status": "pending" | "confirmed" | "completed",
      "specialty": "string",
      "appointmentDate": "ISO-8601"
    }
  ]
}
```

### GET /appointments/{appointmentId}
Obtener detalle de una cita espec√≠fica

**Response**:
```json
{
  "appointmentId": "string",
  "insuredId": "string",
  "status": "string",
  "specialty": "string",
  "countryISO": "string",
  "appointmentDate": "ISO-8601",
  "createdAt": "ISO-8601",
  "updatedAt": "ISO-8601"
}
```

### GET /health
Health check del sistema

**Response**:
```json
{
  "status": "healthy",
  "timestamp": "ISO-8601"
}
```

## Despliegue del Frontend

El frontend est√° ubicado en el directorio `web/` y se despliega en S3 como sitio web est√°tico.

### Prerequisitos

1. **Bucket S3 creado y configurado**:
   - Nombre del bucket (por defecto): `softtek-rimac-page`
   - Website hosting habilitado
   - Permisos de lectura p√∫blica configurados

2. **AWS CLI configurado** con permisos para:
   - `s3:PutObject`
   - `s3:DeleteObject`
   - `s3:ListBucket`
   - `s3:GetObject`

3. **(Opcional) CloudFront** para CDN y HTTPS:
   - Distribuci√≥n creada apuntando al bucket S3
   - Permisos para invalidaci√≥n de cache

### Configuraci√≥n del Bucket S3

**IMPORTANTE**: El nombre del bucket est√° configurado manualmente en `package.json`.

Para cambiar el bucket de destino, edita el script `prepare:web` en `package.json`:

```json
{
  "scripts": {
    "prepare:web": "aws s3 sync web/ s3://TU-BUCKET-AQUI/ --delete ..."
  }
}
```

Reemplaza `softtek-rimac-page` por el nombre de tu bucket en **ambas** ocurrencias del comando.

### Desplegar Frontend

```bash
pnpm run prepare:web
```

Este comando ejecuta dos sincronizaciones en S3:

1. **Archivos est√°ticos** (JS, CSS, im√°genes): Cache de 1 a√±o
   - `--cache-control 'max-age=31536000,public'`
   - Excluye HTML y YAML

2. **Archivos din√°micos** (HTML, YAML): Sin cache
   - `--cache-control 'no-cache'`
   - Incluye: `*.html`, `*.yaml`

Archivos desplegados:
```
web/
‚îú‚îÄ‚îÄ index.html              ‚Üí Agendar citas
‚îú‚îÄ‚îÄ my-appointments.html    ‚Üí Consultar citas
‚îú‚îÄ‚îÄ api-docs.html          ‚Üí Documentaci√≥n Swagger
‚îú‚îÄ‚îÄ openapi.yaml           ‚Üí Especificaci√≥n OpenAPI
‚îî‚îÄ‚îÄ js/
    ‚îú‚îÄ‚îÄ config.js          ‚Üí Configuraci√≥n de la app
    ‚îú‚îÄ‚îÄ mock-data.js       ‚Üí Datos de prueba
    ‚îî‚îÄ‚îÄ api-client.js      ‚Üí Cliente HTTP para la API
```

### Invalidaci√≥n de CloudFront (Opcional)

Si tienes una distribuci√≥n de CloudFront configurada, **debes invalidar el cache** despu√©s de desplegar para que los cambios sean visibles inmediatamente:

```bash
# Invalidar todos los archivos
aws cloudfront create-invalidation \
  --distribution-id TU-DISTRIBUTION-ID \
  --paths "/*"

# Invalidar solo archivos espec√≠ficos (m√°s eficiente)
aws cloudfront create-invalidation \
  --distribution-id TU-DISTRIBUTION-ID \
  --paths "/index.html" "/my-appointments.html" "/api-docs.html" "/openapi.yaml"
```

Para obtener tu `DISTRIBUTION-ID`:
```bash
aws cloudfront list-distributions --query 'DistributionList.Items[*].[Id,DomainName]' --output table
```

**Nota**:
- Sin invalidaci√≥n, CloudFront puede servir versi√≥n cacheada hasta 24 horas
- Las invalidaciones son gratuitas hasta 1,000 paths por mes
- El proceso de invalidaci√≥n toma 1-5 minutos

### Acceso al Frontend

Una vez desplegado, el frontend estar√° disponible en:

**URL Principal (S3 Website)**:
```
http://softtek-rimac-page.s3-website-us-east-1.amazonaws.com
```

**P√°ginas Disponibles**:
- `/` o `/index.html` - P√°gina principal (Agendar cita)
- `/my-appointments.html` - Consultar mis citas
- `/api-docs.html` - Documentaci√≥n de la API (Swagger UI)
- `/openapi.yaml` - Especificaci√≥n OpenAPI (descargable)

**CloudFront (opcional)**: Si tienes CloudFront configurado, las URLs ser√°n:
```
https://d1234567890abc.cloudfront.net/
https://your-custom-domain.com/  (si tienes dominio personalizado)
```

### Configuraci√≥n del API Base URL

El frontend necesita conocer la URL de la API backend para funcionar correctamente.

#### Obtener la URL de la API

Despu√©s de desplegar el backend con `pnpm deploy`, la salida del comando mostrar√°:

```bash
endpoints:
  GET - https://abc123xyz.execute-api.us-east-1.amazonaws.com/health
  POST - https://abc123xyz.execute-api.us-east-1.amazonaws.com/appointments
  GET - https://abc123xyz.execute-api.us-east-1.amazonaws.com/insured/{insuredId}/appointments
  GET - https://abc123xyz.execute-api.us-east-1.amazonaws.com/appointments/{appointmentId}
```

Copia la URL base (sin el path): `https://abc123xyz.execute-api.us-east-1.amazonaws.com`

#### Configurar el Frontend

Edita `web/js/config.js` y actualiza la configuraci√≥n:

```javascript
const CONFIG = {
  // Local development
  local: 'http://localhost:3000',

  // Development environment - ACTUALIZAR ESTA URL
  dev: 'https://abc123xyz.execute-api.us-east-1.amazonaws.com',

  // Production environment
  prod: 'https://your-prod-api-id.execute-api.us-east-1.amazonaws.com'
};

// Cambiar el ambiente seg√∫n necesites
const ENVIRONMENT = 'dev';  // Opciones: 'local', 'dev', 'prod'
```

Despu√©s de actualizar, vuelve a desplegar el frontend:

```bash
pnpm run prepare:web
```

## Estructura del Proyecto

```
softek-rimac/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lambdas/              # Handlers de Lambda
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointment.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointment-pe.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointment-cl.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointment-completed.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schedule.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ health.ts
‚îÇ   ‚îú‚îÄ‚îÄ handlers/             # L√≥gica de procesamiento
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointment-api.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointment-pe-processor.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointment-cl-processor.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointment-completed-processor.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schedule-api.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ health.ts
‚îÇ   ‚îú‚îÄ‚îÄ services/             # Capa de servicios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppointmentService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppointmentProcessor.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ScheduleService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ factories.ts
‚îÇ   ‚îú‚îÄ‚îÄ repositories/         # Acceso a datos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppointmentRepository.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventRepository.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RDSRepository.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ connections.ts
‚îÇ   ‚îú‚îÄ‚îÄ domain/               # Modelos de dominio
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Appointment.ts
‚îÇ   ‚îú‚îÄ‚îÄ events/               # Tipos de eventos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.ts
‚îÇ   ‚îú‚îÄ‚îÄ utils/                # Utilidades
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validators.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ response.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ lambda-wrapper.ts
‚îÇ   ‚îú‚îÄ‚îÄ errors/               # Manejo de errores
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ types/                # Definiciones TypeScript
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ __tests__/            # Pruebas unitarias
‚îÇ       ‚îî‚îÄ‚îÄ unit/
‚îú‚îÄ‚îÄ web/                      # Frontend est√°tico
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ my-appointments.html
‚îÇ   ‚îú‚îÄ‚îÄ api-docs.html
‚îÇ   ‚îú‚îÄ‚îÄ openapi.yaml
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îú‚îÄ‚îÄ coverage/                 # Reportes de cobertura
‚îú‚îÄ‚îÄ .serverless/             # Artefactos de despliegue
‚îú‚îÄ‚îÄ serverless.yml           # Configuraci√≥n de infraestructura
‚îú‚îÄ‚îÄ tsconfig.json            # Configuraci√≥n TypeScript
‚îú‚îÄ‚îÄ jest.config.js           # Configuraci√≥n de pruebas
‚îú‚îÄ‚îÄ package.json             # Dependencias y scripts
‚îî‚îÄ‚îÄ .env                     # Variables de entorno (no versionado)
```

## Stack Tecnol√≥gico

### Backend
- **Runtime**: Node.js 20.x
- **Lenguaje**: TypeScript 5.9
- **Framework**: Serverless Framework 4.x
- **Build**: esbuild (nativo en Serverless v4)
- **Testing**: Jest 30.x con ts-jest
- **AWS SDK**: v3 (modular)
  - @aws-sdk/client-dynamodb
  - @aws-sdk/client-eventbridge
  - @aws-sdk/client-sns
  - @aws-sdk/client-sqs
  - @aws-sdk/lib-dynamodb

### Base de Datos
- **Principal**: DynamoDB (serverless, pay-per-request)
- **Placeholder**: MySQL2 (configurado pero no implementado)

### Frontend
- **Tecnolog√≠a**: HTML5, CSS3, JavaScript Vanilla
- **Hosting**: AWS S3 Static Website

### Infraestructura
- **IaC**: Serverless Framework + CloudFormation
- **Regi√≥n**: us-east-1 (configurable)
- **Compute**: AWS Lambda
- **API**: API Gateway HTTP API
- **Messaging**: SNS + SQS
- **Events**: EventBridge

## Scripts Disponibles

```json
{
  "start": "Desarrollo local (no configurado)",
  "deploy": "Desplegar a AWS",
  "remove": "Eliminar recursos de AWS",
  "test": "Ejecutar pruebas unitarias",
  "test:watch": "Pruebas en modo watch",
  "test:coverage": "Pruebas con reporte de cobertura",
  "test:verbose": "Pruebas con salida detallada",
  "prepare:web": "Desplegar frontend a S3"
}
```

## Configuraci√≥n de AWS

### Permisos Necesarios

El usuario de AWS CLI debe tener permisos para:
- CloudFormation (crear/actualizar stacks)
- Lambda (crear/actualizar funciones)
- API Gateway (crear/gestionar APIs)
- DynamoDB (crear tablas e √≠ndices)
- SNS (crear topics y subscriptions)
- SQS (crear colas y pol√≠ticas)
- EventBridge (crear buses y rules)
- IAM (crear roles y pol√≠ticas)
- S3 (crear buckets y subir objetos)
- CloudWatch Logs (crear log groups)

## Soluci√≥n de Problemas

### Error: "Cannot find module"
```bash
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

### Error de permisos en AWS
Verificar configuraci√≥n de AWS CLI:
```bash
aws sts get-caller-identity
```

### Tests fallando
Limpiar cache de Jest:
```bash
pnpm test --clearCache
pnpm test
```

### Despliegue de Backend fallido
Ver logs detallados:
```bash
serverless deploy --verbose
```

### Problemas con Despliegue del Frontend

#### Error: "NoSuchBucket"
El bucket S3 especificado no existe o el nombre est√° mal configurado.

**Soluci√≥n**:
```bash
# Verificar que el bucket existe
aws s3 ls | grep softtek-rimac-page

# Si no existe, crearlo
aws s3 mb s3://softtek-rimac-page --region us-east-1

# Habilitar website hosting
aws s3 website s3://softtek-rimac-page/ \
  --index-document index.html \
  --error-document index.html
```

#### Error: "AccessDenied" al ejecutar prepare:web
El usuario de AWS CLI no tiene permisos suficientes.

**Soluci√≥n**: Verificar permisos IAM:
```bash
# Verificar identidad actual
aws sts get-caller-identity

# El usuario/role necesita estos permisos:
# - s3:PutObject
# - s3:DeleteObject
# - s3:ListBucket
# - s3:GetObject
```

#### Los cambios no se ven en el sitio web

**Posibles causas**:

1. **Cache del navegador**:
   ```bash
   # Abrir en modo inc√≥gnito o limpiar cache del navegador
   # Chrome: Cmd+Shift+Delete (Mac) / Ctrl+Shift+Delete (Windows)
   ```

2. **Cache de CloudFront** (si est√° configurado):
   ```bash
   # Invalidar cache de CloudFront
   aws cloudfront create-invalidation \
     --distribution-id TU-DISTRIBUTION-ID \
     --paths "/*"
   ```

3. **Bucket policy no permite lectura p√∫blica**:
   ```bash
   # Configurar bucket policy para lectura p√∫blica
   aws s3api put-bucket-policy --bucket softtek-rimac-page --policy '{
     "Version": "2012-10-17",
     "Statement": [{
       "Sid": "PublicReadGetObject",
       "Effect": "Allow",
       "Principal": "*",
       "Action": "s3:GetObject",
       "Resource": "arn:aws:s3:::softtek-rimac-page/*"
     }]
   }'
   ```

#### Error 404 al acceder a la documentaci√≥n

Si `api-docs.html` retorna 404:

**Soluci√≥n**:
```bash
# Verificar que el archivo fue subido
aws s3 ls s3://softtek-rimac-page/ --recursive | grep api-docs

# Si no est√°, volver a desplegar
pnpm run prepare:web
```
